---
import { tickets, db } from "astro:db";
import MainLayout from "../layouts/MainLayout.astro";

const allTickets = await db.select().from(tickets);
---

<MainLayout>
  <div class="container mx-auto p-6">
    <div class="bg-white shadow-md rounded-lg p-6">
      <h1 class="text-2xl font-bold mb-4 text-center">¡Gracias por enviar tu reporte!</h1>
      <p class="text-lg text-gray-700 mb-4 text-center">Tu formulario ha sido recibido con éxito. A continuación, te proporcionamos el número de tu ticket y un resumen del reporte.</p>
      
      <div class="space-y-6">
        {allTickets.map((ticket) => (
          <div class="bg-gray-100 border border-gray-300 rounded-lg p-4">
            <h2 class="text-xl font-semibold mb-2">Número de Ticket: {ticket.ticketNumber}</h2>
            <p class="text-gray-600">{ticket.resumen}</p>
          </div>
        ))}
      </div>
    </div>
  </div>
</MainLayout>
